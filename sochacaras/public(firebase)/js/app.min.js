var deferredPrompt;window.Promise||(window.Promise=Promise);"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(function(){console.log("Service worker registered!")})["catch"](function(a){console.log(a)});window.addEventListener("beforeinstallprompt",function(a){console.log("beforeinstallprompt Event fired");a.preventDefault();deferredPrompt=a;return!1});
btnSave.addEventListener("click",function(){void 0!==deferredPrompt&&(deferredPrompt.prompt(),deferredPrompt.userChoice.then(function(a){console.log(a.outcome);"dismissed"==a.outcome?console.log("User cancelled home screen install"):console.log("User added to home screen");deferredPrompt=null}))});
function displayConfirmNotification(){if("serviceWorker"in navigator){var a={body:"Voc\u00ea se inscreveu com sucesso em nosso servi\u00e7o de notifica\u00e7\u00e3o!",icon:"/imagens/icons/app-icon-96x96.png",dir:"ltr",lang:"pt-BR",vibrate:[100,50,200],badge:"/imagens/icons/app-icon-96x96.png",tag:"confirm-notification",renotify:!0,actions:[{action:"confirm",title:"Ok",icon:"/imagens/icons/app-icon-96x96.png"},{action:"cancel",title:"Cancelar",icon:"/imagens/icons/app-icon-96x96.png"}]};navigator.serviceWorker.ready.then(function(b){b.showNotification("Inscri\u00e7\u00e3o Realizada com Sucesso!",
a)})}}
function configurePushSub(){if("serviceWorker"in navigator){var a;navigator.serviceWorker.ready.then(function(b){a=b;return b.pushManager.getSubscription()}).then(function(b){if(null===b)return b=urlBase64ToUint8Array("BI5ASE9uPWo-MD4f2tWiHOkVQOSeexE16JEVQrZy0W1eyZv3In5BTJ0iSwOPAQVKjdvP89IgEzFfc-F7GZD1YWY"),a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:b});alert("Voc\u00ea j\u00e1 autorizou o servi\u00e7o de notifica\u00e7\u00f5es!")}).then(function(a){return fetch("https://so-chacaras.firebaseio.com/InscUsersForPushNotify.json",{method:"POST",
headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)})}).then(function(a){a.ok&&displayConfirmNotification()})["catch"](function(a){console.log(a)})}}function askForNotificationPermission(){Notification.requestPermission(function(a){console.log("Escolha do Usu\u00e1rio",a);"granted"!==a?console.log("Nenhuma permiss\u00e3o de notifica\u00e7\u00e3o concedida!"):configurePushSub()})};
